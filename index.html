<!-- VERSION C8 -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jio Partner Incentive Calculator - C8</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      margin: 20px;
      background: #fafafa;
    }
    h2 {
      color: #d1001f;
    }
    .emboss-line {
      height: 2px;
      background: linear-gradient(to right, #e0e0e0, #cfcfcf, #e0e0e0);
      box-shadow: inset 0 1px #fff, inset 0 -1px #aaa;
      margin: 12px 0 24px;
    }
    .section {
      padding: 12px 0;
      border-bottom: 1px solid #dcdcdc;
    }
    .section h3 {
      margin-bottom: 12px;
      color: #333;
    }
    .row {
      display: flex;
      flex-wrap: nowrap;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }
    .row label {
      flex: 1;
      font-weight: 500;
    }
    .row input,
    .row select {
      flex: 0 0 80px;
      padding: 6px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 4px;
      text-align: right;
    }
    button {
      background-color: #0b57d0;
      color: white;
      padding: 12px 24px;
      border: none;
      font-size: 16px;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 20px;
      width: 100%;
    }
    .modal {
      display: none;
      position: fixed;
      top: 10%;
      left: 10%;
      width: 80%;
      background: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 20px;
      z-index: 1000;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      max-height: 80%;
      overflow-y: auto;
    }
    .modal table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }
    .modal th,
    .modal td {
      padding: 8px;
      text-align: left;
      border: 1px solid #ddd;
    }
    .modal tr.bonus-row td {
      font-weight: bold;
      background-color: #f3f3f3;
    }
    .overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }
    @media screen and (max-width: 480px) {
      .row label {
        flex: 1;
        font-size: 13px;
      }
      .row input,
      .row select {
        flex: 0 0 70px;
        font-size: 13px;
      }
    }
  </style>
</head>
<body>

<h2>Jio Partner Incentive Calculator</h2>
<div class="emboss-line"></div>

<div class="section">
  <h3>1. MNP Activation<span class="info-icon" onclick="openImageInPopup('photo.png')">üñºÔ∏è</span</h3>
  <div class="row"><label>1a. ‚Çπ299 Plan</label><input type="number" id="mnp299" min="0" max="999"></div>
  <div class="row"><label>1b. ‚Çπ349 Plan</label><input type="number" id="mnp349" min="0" max="999"></div>
</div>

<div class="section">
  <h3>2. New SIM Activation<span class="info-icon" onclick="openImageInPopup('photo.png')">üñºÔ∏è</span</h3>
  <div class="row"><label>2a. ‚Çπ299 Plan</label><input type="number" id="sim299" min="0" max="999"></div>
  <div class="row"><label>2b. ‚Çπ349 Plan</label><input type="number" id="sim349" min="0" max="999"></div>
</div>

<div class="section">
  <h3>3. Type of Retailer<span class="info-icon" onclick="openImageInPopup('photo.png')">üñºÔ∏è</span</h3>
  <div class="row">
    <label>3a. Retailer Type</label>
    <select id="retailerType">
      <option value="" disabled selected>Select</option>
      <option value="JPR">JPR</option>
      <option value="Non-JPR">Non-JPR</option>
    </select>
  </div>
</div>

<div class="section">
  <h3>4. JAF Bookings<span class="info-icon" onclick="openImageInPopup('photo.png')">üñºÔ∏è</span</h3>
  <div class="row"><label>4a. ‚Çπ1111 Booking</label><input type="number" id="jaf1111" min="0" max="999"></div>
  <div class="row"><label>4b. ‚Çπ2222 Booking</label><input type="number" id="jaf2222" min="0" max="999"></div>
  <div class="row"><label>4c. Unlimited Offer</label><input type="number" id="jafUnlimited" min="0" max="999"></div>
</div>

<div class="section">
  <h3>5. JioBharat Sales<span class="info-icon" onclick="openImageInPopup('photo.png')">üñºÔ∏è</span</h3>
  <div class="row"><label>5a. V4 (MOP - 799)</label><input type="number" id="jbV4" min="0" max="999"></div>
  <div class="row"><label>5b. B2 (MOP - 1399)</label><input type="number" id="jbB2" min="0" max="999"></div>
  <div class="row"><label>5c. J1 (MOP - 1799)</label><input type="number" id="jbJ1" min="0" max="999"></div>
</div>

<div class="section">
  <h3>6. JioBharat ‚Äì New SIM<span class="info-icon" onclick="openImageInPopup('photo.png')">üñºÔ∏è</span</h3>
  <div class="row"><label>6a. FR 123/234</label><input type="number" id="jbNewSIM123" min="0" max="999"></div>
  <div class="row"><label>6b. FR 1234</label><input type="number" id="jbNewSIM1234" min="0" max="999"></div>
</div>

<div class="section">
  <h3>7. JioBharat ‚Äì MNP<span class="info-icon" onclick="openImageInPopup('photo.png')">üñºÔ∏è</span</h3>
  <div class="row"><label>7a. FR 123/234</label><input type="number" id="jbMnp123" min="0" max="999"></div>
  <div class="row"><label>7b. FR 1234</label><input type="number" id="jbMnp1234" min="0" max="999"></div>
</div>

<button onclick="calculate()">Calculate</button>

<div class="overlay" id="overlay" onclick="closePopup()"></div>
<div class="modal" id="resultModal">
  <h3>Total Incentive Summary</h3>
  <table>
    <thead>
      <tr><th>Section</th><th>Incentive (‚Çπ)</th></tr>
    </thead>
    <tbody id="resultTableBody"></tbody>
    <tr class="bonus-row"><td>MNP Big Hitter Inc.</td><td id="mnpBonusCell">‚Çπ0</td></tr>
    <tr class="bonus-row"><td>FR 349 Slab Inc.</td><td id="fr349BonusCell">‚Çπ0</td></tr>
    <tr class="bonus-row"><td>MNP Booster Inc.</td><td id="mnpBoosterCell">‚Çπ0</td></tr>
    <tfoot>
      <tr><th>Total</th><th id="grandTotal">‚Çπ0</th></tr>
    </tfoot>
  </table>
</div>

<script>
  function get(id) {
    const value = document.getElementById(id).value;
    return parseInt(value) || 0; // üî∏ Treat blank as 0
  }

  function calculate() {
    const retailer = document.getElementById("retailerType").value;
    let total = 0, breakdown = [];

    const mnp299 = get("mnp299");
    const mnp349 = get("mnp349");
    const sim349 = get("sim349");
    const totalMNP = mnp299 + mnp349;

    let mnp = mnp299 * 209 + mnp349 * 234;
    breakdown.push(["MNP Activation", mnp]); total += mnp;

    let sim = get("sim299") * 122.45 + sim349 * 132.65;
    breakdown.push(["New SIM Activation", sim]); total += sim;

    let jaf = get("jaf1111") * 96;
    jaf += get("jaf2222") * (retailer === "JPR" ? 200 : 96);
    jaf += get("jafUnlimited") * 120;
    breakdown.push(["JAF Booking", jaf]); total += jaf;

    let sales = get("jbV4") * 125 + get("jbB2") * 160 + get("jbJ1") * 200;
    breakdown.push(["JioBharat Sales", sales]); total += sales;

    let newSim = get("jbNewSIM123") * 18 + get("jbNewSIM1234") * 48;
    breakdown.push(["JB New SIM", newSim]); total += newSim;

    let jbMnp = get("jbMnp123") * 96 + get("jbMnp1234") * 193;
    breakdown.push(["JB MNP", jbMnp]); total += jbMnp;

    // Bonus 1
    let mnpBonus = 0;
    if (totalMNP >= 10 && totalMNP <= 19) mnpBonus = 387;
    else if (totalMNP >= 20 && totalMNP <= 29) mnpBonus = 775;
    else if (totalMNP >= 30 && totalMNP <= 59) mnpBonus = 1163;
    else if (totalMNP >= 60 && totalMNP <= 99) mnpBonus = 2423;
    else if (totalMNP >= 100 && totalMNP <= 149) mnpBonus = 4846;
    else if (totalMNP >= 150) mnpBonus = 6785;
    total += mnpBonus;

    // Bonus 2
    const fr349Total = mnp349 + sim349;
    let fr349Bonus = 0;
    if (fr349Total >= 5 && fr349Total <= 9) fr349Bonus = fr349Total * 10;
    else if (fr349Total >= 10) fr349Bonus = fr349Total * 20;
    total += fr349Bonus;

    // Bonus 3
    let M = Math.floor(totalMNP / 3);
    let mnpBoosterPer = 0;
    if (M >= 1 && M <= 3) mnpBoosterPer = 33;
    else if (M >= 4 && M <= 9) mnpBoosterPer = 48;
    else if (M >= 10) mnpBoosterPer = 63;
    let mnpBoosterBonus = 3 * M * mnpBoosterPer;
    total += mnpBoosterBonus;

    // UI
    const tbody = document.getElementById("resultTableBody");
    tbody.innerHTML = "";
    breakdown.forEach(([label, value]) => {
      const row = `<tr><td>${label}</td><td>‚Çπ${value.toFixed(2)}</td></tr>`;
      tbody.insertAdjacentHTML("beforeend", row);
    });

    document.getElementById("mnpBonusCell").innerText = `‚Çπ${mnpBonus.toFixed(2)}`;
    document.getElementById("fr349BonusCell").innerText = `‚Çπ${fr349Bonus.toFixed(2)}`;
    document.getElementById("mnpBoosterCell").innerText = `‚Çπ${mnpBoosterBonus.toFixed(2)}`;
    document.getElementById("grandTotal").innerText = `‚Çπ${total.toFixed(2)}`;

    document.getElementById("resultModal").style.display = "block";
    document.getElementById("overlay").style.display = "block";
  }

  function closePopup() {
    document.getElementById("resultModal").style.display = "none";
    document.getElementById("overlay").style.display = "none";
  }
</script>

<script>
    function openImageInPopup(imagePath) {
      const newWindow = window.open("", "_blank", "width=600,height=400");
      newWindow.document.write(`
        <html>
          <head><title>Image</title></head>
          <body style="margin:0; text-align:center; background:#f0f0f0;">
            <img src="${imagePath}" style="max-width:100%; margin-top:20px;" alt="Reference Image" />
          </body>
        </html>
      `);
    }
  </script>

</body>
</html>


